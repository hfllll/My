import{k as y,d as J,u as K,i as m,g as Q,c as n,a as t,t as r,b as l,j as F,F as b,r as g,x,f as _,B as W,E as U,G as V,o as i}from"./index-BUqii-Ct.js";import{I as h}from"./iconify-BJ3ZB8U3.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";function p(c){return c?c.result&&c.result.records?c.result.records:c.records?c.records:Array.isArray(c.result)?c.result:Array.isArray(c)?c:[]:[]}function Z(c){return y.get("/mose-admin/mose/community/queryOfficialMediaList",c).then(a=>p(a))}function tt(c){return y.get("/mose-admin/mose/community/queryForumList",c).then(a=>p(a))}function et(c){return y.get("/mose-admin/mose/community/queryCommentsList",c).then(a=>p(a))}function st(c){return y.get("/mose-admin/mose/community/queryMessageList",c).then(a=>p(a))}function ot(c){return y.get("/mose-admin/mose/community/queryCommunityList",c).then(a=>p(a))}function nt(c){return y.get("/mose-admin/mose/community/addComments",c)}const it={class:"bg-background min-h-screen"},at={class:"relative py-24 px-6 md:px-12 lg:px-24 bg-background-dark overflow-hidden"},rt={class:"container mx-auto relative z-10"},lt={class:"max-w-3xl mx-auto text-center"},ct={class:"text-4xl md:text-5xl lg:text-6xl font-bold text-text mb-6 wow animate__animated animate__fadeInDown animate__duration-fast"},dt={class:"text-lg md:text-xl text-text-secondary mb-8 wow animate__animated animate__fadeIn animate__delay-sm"},ut={class:"py-16 px-6 md:px-12 lg:px-24"},mt={class:"container mx-auto"},xt={class:"text-3xl font-bold text-text mb-10 text-center wow animate__animated animate__fadeInUp"},ht={key:0,class:"flex justify-center items-center py-12"},_t={key:1,class:"flex flex-wrap justify-center gap-6 mb-10"},yt=["href"],bt={class:"h-12 w-12 bg-primary bg-opacity-10 rounded-full flex items-center justify-center mr-4"},gt={class:"text-lg font-medium text-text block"},pt=["innerHTML"],ft={key:2,class:"text-center py-10"},vt={class:"py-16 px-6 md:px-12 lg:px-24 bg-background-light"},wt={class:"container mx-auto"},kt={class:"text-3xl font-bold text-text mb-6 text-center wow animate__animated animate__fadeInUp"},Lt={class:"text-text-secondary text-center mb-8 max-w-2xl mx-auto"},Mt={key:0,class:"flex justify-center items-center py-12"},Tt={key:1,class:"max-w-4xl mx-auto bg-background rounded-xl shadow-lg overflow-hidden border border-background-light"},Ct={class:"bg-primary bg-opacity-10 p-4 border-b border-background-light"},jt={class:"flex items-center justify-between"},Bt={class:"flex items-center space-x-2"},qt={class:"text-sm text-text-secondary"},St={key:0,class:"text-center py-16"},Dt={key:1,class:"h-[600px] overflow-y-auto"},It={class:"p-6"},Ht={class:"bg-background-light rounded-lg border border-background-light hover:border-primary-light transition-colors duration-300"},At={class:"p-5"},Nt={class:"flex justify-between items-center mb-4"},Ft={class:"text-xl font-bold text-text hover:text-primary transition-colors duration-300"},Ut={class:"text-sm text-text-secondary bg-background-dark bg-opacity-20 px-2 py-1 rounded-full"},Vt={key:0,class:"mb-4"},zt=["src","alt"],Et=["innerHTML"],Ot={class:"flex items-center text-sm text-text-secondary"},Pt={class:"font-medium flex items-center"},$t={class:"inline-block w-8 h-8 rounded-full bg-primary bg-opacity-20 text-primary flex items-center justify-center mr-2"},Yt={class:"bg-primary bg-opacity-10 text-primary px-2 py-1 rounded-full text-xs"},Gt={key:0,class:"border-t border-background-light"},Rt={class:"p-5 bg-background bg-opacity-50"},Jt={class:"font-bold text-base text-text mb-4 flex items-center"},Kt={key:0,class:"space-y-4 mb-5 max-h-[250px] overflow-y-auto"},Qt={class:"flex justify-between items-center mb-2"},Wt={class:"font-bold text-text text-sm flex items-center"},Xt={class:"inline-block w-6 h-6 rounded-full bg-secondary bg-opacity-20 text-secondary flex items-center justify-center mr-2 text-xs"},Zt={class:"text-xs text-text-secondary bg-background-dark bg-opacity-10 px-2 py-1 rounded-full"},te=["innerHTML"],ee={key:1,class:"text-center text-text-secondary text-sm py-6 bg-background-dark bg-opacity-5 rounded-lg border border-dashed border-background-light"},se=["onSubmit"],oe={class:"font-medium text-sm text-text mb-3"},ne={class:"mb-3"},ie=["placeholder"],ae={class:"mb-3"},re=["placeholder"],le={class:"flex justify-between items-center"},ce={type:"submit",class:"px-4 py-2 bg-primary text-text text-sm rounded-lg hover:bg-primary-dark transition-colors duration-200 flex items-center"},de={key:1,class:"p-4 flex justify-between items-center border-t border-background-light bg-background-dark bg-opacity-5"},ue={class:"text-sm text-text-secondary flex items-center"},me=["onClick"],xe={class:"py-16 px-6 md:px-12 lg:px-24"},he={class:"container mx-auto"},_e={class:"text-3xl font-bold text-text mb-4 text-center wow animate__animated animate__fadeInUp"},ye={key:0,class:"flex justify-center items-center py-12"},be={key:1,class:"text-center py-10"},ge={key:2,class:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto mt-8"},pe={class:"flex items-start gap-4"},fe={key:0,class:"w-16 h-16 rounded-lg overflow-hidden flex-shrink-0"},ve=["src","alt"],we={key:1,class:"w-16 h-16 rounded-lg bg-primary bg-opacity-10 flex items-center justify-center flex-shrink-0"},ke={class:"flex-1"},Le={class:"text-lg font-bold text-text mb-2"},Me=["innerHTML"],Te={class:"text-xs text-text-secondary"},Ce={class:"py-16 px-6 md:px-12 lg:px-24 bg-background-light"},je={class:"container mx-auto"},Be={class:"text-3xl font-bold text-text mb-4 text-center wow animate__animated animate__fadeInUp"},qe={key:0,class:"flex justify-center items-center py-12"},Se={key:1,class:"text-center py-10"},De={key:2,class:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8"},Ie={key:0,class:"h-48 overflow-hidden"},He=["src","alt"],Ae={key:1,class:"h-48 bg-primary bg-opacity-10 flex items-center justify-center"},Ne={class:"p-6"},Fe={class:"text-lg font-bold text-text mb-2"},Ue=["innerHTML"],Ve={class:"text-text-secondary text-xs"},ze=J({__name:"Community",setup(c){const{t:a}=K(),M=m([]),f=m(!0),v=m([]),w=m(!0),S=m({}),D=m(!0),T=m([]),C=m(!0),j=m([]),B=m(!0),u=m({forumId:null,content:"",createBy:""}),q=m(null),z=async()=>{try{f.value=!0;const o=await Z({pageSize:10,pageNo:1});M.value=o}catch(o){console.error("加载社交媒体数据失败:",o)}finally{f.value=!1}},E=async()=>{try{w.value=!0;const o=await tt({pageSize:10,pageNo:1});v.value=o,await Promise.all(o.map(e=>I(e.id)))}catch(o){console.error("加载论坛数据失败:",o)}finally{w.value=!1}},I=async o=>{try{D.value=!0;const e=await et({forumId:o});S.value[o]=e}catch(e){console.error(`加载论坛${o}的评论数据失败:`,e)}finally{D.value=!1}},O=async()=>{try{C.value=!0;const o=await st({pageSize:10,pageNo:1});T.value=o}catch(o){console.error("加载信息公示数据失败:",o)}finally{C.value=!1}},P=async()=>{try{B.value=!0;const o=await ot({pageSize:6,pageNo:1});j.value=o}catch(o){console.error("加载社区数据失败:",o)}finally{B.value=!1}},$=async o=>{if(u.value.createBy&&u.value.content)try{await nt({forumId:o,content:u.value.content,createBy:u.value.createBy}),await I(o),u.value.createBy="",u.value.content="",u.value.forumId=null}catch(e){console.error("提交评论失败:",e)}},Y=o=>{const e=window.scrollY;q.value=o,u.value.forumId=o,setTimeout(()=>{window.scrollTo({top:e,behavior:"auto"})},0)},G=()=>{const o=window.scrollY;q.value=null,setTimeout(()=>{window.scrollTo({top:o,behavior:"auto"})},0)},k=o=>S.value[o]||[],H=o=>{const e=new Date,s=new Date(o),L=Math.abs(e.getTime()-s.getTime()),d=Math.floor(L/(1e3*60*60*24));return d<1?a("community.time.today"):d===1?a("community.time.yesterday"):d<7?a("community.time.days_ago",{days:d}):new Date(o).toLocaleDateString()},A=o=>new Date(o).toLocaleDateString(),R=o=>{const e=o.toLowerCase();return e.includes("twitter")||e.includes("x")?"mdi:twitter":e.includes("telegram")?"mdi:telegram":e.includes("discord")?"mdi:discord":e.includes("medium")?"mdi:medium":e.includes("github")?"mdi:github":e.includes("reddit")?"mdi:reddit":e.includes("facebook")?"mdi:facebook":e.includes("instagram")?"mdi:instagram":"mdi:web"};return Q(()=>{z(),E(),O(),P()}),(o,e)=>(i(),n("div",it,[t("section",at,[t("div",rt,[t("div",lt,[t("h1",ct,r(l(a)("community.hero.title")),1),t("p",dt,r(l(a)("community.hero.subtitle")),1)])]),e[2]||(e[2]=t("div",{class:"absolute top-0 left-0 w-full h-full overflow-hidden opacity-10"},[t("div",{class:"absolute -top-24 -left-24 w-64 h-64 rounded-full bg-secondary blur-3xl wow animate__animated animate__pulse animate__infinite"}),t("div",{class:"absolute top-1/2 right-0 w-80 h-80 rounded-full bg-primary blur-3xl wow animate__animated animate__pulse animate__infinite animate__delay-sm"}),t("div",{class:"absolute -bottom-24 left-1/3 w-72 h-72 rounded-full bg-accent blur-3xl wow animate__animated animate__pulse animate__infinite animate__delay-md"})],-1))]),t("section",ut,[t("div",mt,[t("h2",xt,r(l(a)("community.social_media.title")),1),f.value?(i(),n("div",ht,e[3]||(e[3]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"},null,-1)]))):(i(),n("div",_t,[(i(!0),n(b,null,g(M.value,s=>(i(),n("a",{key:s.id,href:s.link,target:"_blank",rel:"noopener noreferrer",class:"flex items-center bg-background-light p-4 rounded-xl shadow-card transition-all duration-300 hover:shadow-lg hover:-translate-y-1"},[t("div",bt,[x(l(h),{icon:R(s.title),class:"h-6 w-6 text-primary-light"},null,8,["icon"])]),t("div",null,[t("span",gt,r(s.title),1),t("span",{class:"text-sm text-text-secondary",innerHTML:s.description},null,8,pt)])],8,yt))),128))])),!f.value&&M.value.length===0?(i(),n("div",ft,[x(l(h),{icon:"carbon:no-content",class:"mx-auto mb-4",width:"48",height:"48"}),e[4]||(e[4]=t("p",{class:"text-text-secondary"},"暂无社交媒体数据",-1))])):F("",!0)])]),t("section",vt,[t("div",wt,[t("h2",kt,r(l(a)("community.forum.title")),1),t("p",Lt,r(l(a)("community.forum.description")),1),w.value?(i(),n("div",Mt,e[5]||(e[5]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"},null,-1)]))):(i(),n("div",Tt,[t("div",Ct,[t("div",jt,[e[7]||(e[7]=t("h3",{class:"font-bold text-lg text-primary"},"MOSE Forum",-1)),t("div",Bt,[e[6]||(e[6]=t("span",{class:"inline-block w-2 h-2 rounded-full bg-green-500"},null,-1)),t("span",qt,r(v.value.length)+" "+r(l(a)("community.forum.topics")),1)])])]),!w.value&&v.value.length===0?(i(),n("div",St,[x(l(h),{icon:"carbon:no-content",class:"mx-auto mb-4",width:"48",height:"48"}),e[8]||(e[8]=t("p",{class:"text-text-secondary"},"暂无论坛数据",-1))])):(i(),n("div",Dt,[t("div",It,[(i(!0),n(b,null,g(v.value,s=>{var L;return i(),n("div",{key:s.id,class:"mb-6 overflow-hidden"},[t("div",Ht,[t("div",At,[t("div",Nt,[t("h3",Ft,r(s.title),1),t("span",Ut,r(H(s.createTime||"")),1)]),s.image?(i(),n("div",Vt,[t("img",{src:s.image,alt:s.title,class:"w-full h-48 object-cover rounded-lg"},null,8,zt)])):F("",!0),t("p",{class:"text-text-secondary text-base mb-4 leading-relaxed",innerHTML:s.content},null,8,Et),t("div",Ot,[t("span",Pt,[t("span",$t,r(((L=s.createBy)==null?void 0:L.charAt(0))||"M"),1),_(" "+r(s.createBy||"MOSE Team"),1)]),e[9]||(e[9]=t("span",{class:"mx-2"},"•",-1)),t("span",Yt,r(l(a)("community.social_media.official_post")),1)])]),q.value===s.id?(i(),n("div",Gt,[t("div",Rt,[t("h4",Jt,[x(l(h),{icon:"carbon:chat",class:"mr-2 text-primary",width:"20",height:"20"}),_(" "+r(l(a)("community.forum.comments"))+" ("+r(k(s.id).length)+") ",1)]),k(s.id).length>0?(i(),n("div",Kt,[(i(!0),n(b,null,g(k(s.id),d=>{var N;return i(),n("div",{key:d.id,class:"bg-background rounded-lg p-4 border border-background-light"},[t("div",Qt,[t("span",Wt,[t("span",Xt,r(((N=d.createBy)==null?void 0:N.charAt(0))||"U"),1),_(" "+r(d.createBy||"Anonymous"),1)]),t("span",Zt,r(H(d.createTime||"")),1)]),t("p",{class:"text-text-secondary text-sm pl-8",innerHTML:d.content},null,8,te)])}),128))])):(i(),n("div",ee,[x(l(h),{icon:"carbon:chat",class:"mx-auto mb-2 text-text-secondary opacity-50",width:"40",height:"40"}),_(" "+r(l(a)("community.forum.no_comments")),1)])),t("form",{onSubmit:W(d=>$(s.id),["prevent"]),class:"mt-6 bg-background p-4 rounded-lg border border-background-light"},[t("h5",oe,r(l(a)("community.forum.add_comment")),1),t("div",ne,[U(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=d=>u.value.createBy=d),class:"w-full px-4 py-2 text-sm rounded-lg border border-background-light bg-background focus:outline-none focus:ring-1 focus:ring-primary",placeholder:l(a)("community.forum.username"),required:""},null,8,ie),[[V,u.value.createBy]])]),t("div",ae,[U(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=d=>u.value.content=d),rows:"3",class:"w-full px-4 py-2 text-sm rounded-lg border border-background-light bg-background focus:outline-none focus:ring-1 focus:ring-primary",placeholder:l(a)("community.forum.comment"),required:""},null,8,re),[[V,u.value.content]])]),t("div",le,[t("button",{type:"button",class:"px-4 py-2 border border-primary-light text-primary-light text-sm rounded-lg hover:bg-primary-light hover:bg-opacity-10 transition-colors duration-200",onClick:G},r(l(a)("community.forum.cancel")),1),t("button",ce,[x(l(h),{icon:"carbon:send",class:"mr-1",width:"16",height:"16"}),_(" "+r(l(a)("community.forum.submit")),1)])])],40,se)])])):(i(),n("div",de,[t("span",ue,[x(l(h),{icon:"carbon:chat",class:"mr-1",width:"16",height:"16"}),_(" "+r(l(a)("community.forum.comments"))+": "+r(k(s.id).length),1)]),t("button",{onClick:d=>Y(s.id),class:"px-4 py-2 text-sm bg-primary text-text rounded-lg hover:bg-primary-dark transition-colors duration-200 flex items-center"},[x(l(h),{icon:"carbon:view",class:"mr-1",width:"16",height:"16"}),_(" "+r(l(a)("community.forum.view_comments")),1)],8,me)]))])])}),128))])]))]))])]),t("section",xe,[t("div",he,[t("h2",_e,r(l(a)("community.announcements.title")),1),C.value?(i(),n("div",ye,e[10]||(e[10]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"},null,-1)]))):T.value.length===0?(i(),n("div",be,[x(l(h),{icon:"carbon:no-content",class:"mx-auto mb-4",width:"48",height:"48"}),e[11]||(e[11]=t("p",{class:"text-text-secondary"},"暂无信息公示数据",-1))])):(i(),n("div",ge,[(i(!0),n(b,null,g(T.value,s=>(i(),n("div",{key:s.id,class:"bg-background-light rounded-xl p-6 shadow-card hover:shadow-lg transition-all duration-300"},[t("div",pe,[s.image?(i(),n("div",fe,[t("img",{src:s.image,alt:s.title,class:"w-full h-full object-cover"},null,8,ve)])):(i(),n("div",we,[x(l(h),{icon:"carbon:notification",width:"32",height:"32",class:"text-primary"})])),t("div",ke,[t("h3",Le,r(s.title),1),t("p",{class:"text-sm text-text-secondary mb-2",innerHTML:s.content},null,8,Me),t("div",Te,r(A(s.createTime||"")),1)])])]))),128))]))])]),t("section",Ce,[t("div",je,[t("h2",Be,r(l(a)("community.highlights.title")),1),B.value?(i(),n("div",qe,e[12]||(e[12]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"},null,-1)]))):j.value.length===0?(i(),n("div",Se,[x(l(h),{icon:"carbon:no-content",class:"mx-auto mb-4",width:"48",height:"48"}),e[13]||(e[13]=t("p",{class:"text-text-secondary"},"暂无社区活动数据",-1))])):(i(),n("div",De,[(i(!0),n(b,null,g(j.value,s=>(i(),n("div",{key:s.id,class:"bg-background rounded-xl overflow-hidden shadow-card hover:shadow-lg transition-all duration-300"},[s.image?(i(),n("div",Ie,[t("img",{src:s.image,alt:s.title,class:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"},null,8,He)])):(i(),n("div",Ae,[x(l(h),{icon:"carbon:events",width:"64",height:"64",class:"text-primary opacity-50"})])),t("div",Ne,[t("h4",Fe,r(s.title),1),t("p",{class:"text-text-secondary text-sm mb-2",innerHTML:s.content},null,8,Ue),t("p",Ve,r(A(s.createTime||"")),1)])]))),128))]))])])]))}}),$e=X(ze,[["__scopeId","data-v-8d38dcd1"]]);export{$e as default};
